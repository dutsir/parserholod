# 🏠 Агрегатор недвижимости

Полнофункциональная система сбора, обработки и отображения объявлений о недвижимости с популярных сайтов (Avito, FarPost, CIAN).

**Курсовой проект** по интеграции разнородных данных и созданию веб-приложения.

---

## 📋 Описание проекта

Система решает следующие задачи:
1. ✅ **Парсинг** данных с 3 веб-сайтов (Avito, FarPost, CIAN)
2. ✅ **Сбор** >1000 уникальных позиций с каждого источника
3. ✅ **Хранение** в единой реляционной БД (PostgreSQL)
4. ✅ **Дедупликация** объявлений на основе нечеткого сравнения
5. ✅ **Веб-интерфейс** для поиска и просмотра данных
6. ✅ **REST API** с автодокументацией (Swagger)
7. ✅ **Docker** для простого развертывания

---

## 🏗️ Архитектура системы

```
┌─────────────────┐
│   Веб-сайты     │
│ Avito/FarPost/  │
│      CIAN       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│    Парсеры      │
│  (async crawl)  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Offers (raw)   │
│   PostgreSQL    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Дедупликация   │
│ (rapidfuzz 85%) │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│Products+Offers  │
│   (normalized)  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   FastAPI +     │
│   Frontend      │
└─────────────────┘
```

---

## 📊 Структура базы данных

### ER-диаграмма

```
┌──────────────┐          ┌──────────────┐          ┌──────────────┐
│   PRODUCTS   │◄────────┤│    OFFERS    │          │  ATTRIBUTES  │
├──────────────┤1       *├──────────────┤          ├──────────────┤
│ id (PK)      │          │ id (PK)      │          │ id (PK)      │
│ canonical_   │          │ product_id   │          │ product_id   │
│  title       │          │  (FK)        │────*────►│  (FK)        │
│ canonical_   │          │ external_id  │          │ attribute_   │
│  address     │          │ website_name │          │  name        │
│ description  │          │ title        │          │ attribute_   │
│ rooms        │          │ price        │          │  value       │
│ area         │          │ url          │          └──────────────┘
│ property_    │          │ address      │
│  type        │          │ area         │
│ image_url    │          │ rooms        │
│ min_price    │          │ date_parsed  │
│ created_at   │          └──────────────┘
│ updated_at   │
└──────────────┘
```

### Таблицы

- **PRODUCTS** - уникальные объекты после дедупликации
- **OFFERS** - все собранные объявления с источников
- **ATTRIBUTES** - дополнительные характеристики (этаж, тип дома и т.д.)


